<section class="register-page">
  <div class="register-shell">
    <aside class="promo-panel">
      <div class="promo-content">
        <span class="promo-eyebrow">Bienvenido</span>
        <h1 class="promo-title">Convertite en uno de nuestros clientes</h1>
        <p class="promo-copy">
          Unite para enterarte de ofertas y conseguir los mejores productos en un solo lugar.
        </p>
        <div class="promo-cta">
          <span class="promo-subtext">Ya tenes cuenta?</span>
          <a class="promo-button" routerLink="/auth/login">Inici&aacute; sesi&oacute;n</a>
        </div>
      </div>
      <div class="promo-shape"></div>
    </aside>

    <div class="form-panel">
      <header class="form-header">
  
        <h2 class="form-title">Crear cuenta</h2>
        <p class="form-description">Completa tus datos para comenzar en segundos.</p>
      </header>



      <form class="register-form" [formGroup]="fg" (ngSubmit)="onsubmit()">
        <label class="form-label" for="username">Nombre de usuario</label>
        <input
          id="username"
          class="form-input"
          type="text"
          formControlName="username"
          autocomplete="username"
          [class.is-invalid]="showErrors('username')"
          placeholder="ej. pepito-123"
        />
        @if (showErrors('username')) {
          <div class="form-error">
            @if (hasError('username', 'required')) {
              <span>El nombre de usuario es obligatorio.</span>
            }
            @if (hasError('username', 'minlength')) {
              <span>Debe tener al menos 4 caracteres.</span>
            }
            @if (hasError('username', 'maxlength')) {
              <span>No puede superar los 50 caracteres.</span>
            }
            @if (hasError('username', 'pattern')) {
              <span>Solo se permiten letras, numeros, puntos, guiones y guiones bajos.</span>
            }
          </div>
        }

        <label class="form-label" for="email">E-mail</label>
        <input
          id="email"
          class="form-input"
          type="email"
          formControlName="email"
          autocomplete="email"
          [class.is-invalid]="showErrors('email')"
          placeholder="tu-correo@ejemplo.com"
        />
        @if (showErrors('email')) {
          <div class="form-error">
            @if (hasError('email', 'required')) {
              <span>El correo electronico es obligatorio.</span>
            }
            @if (hasError('email', 'email')) {
              <span>Ingresa un correo electronico valido.</span>
            }
          </div>
        }

        <label class="form-label" for="password">Contraseña</label>
        <input
          id="password"
          class="form-input"
          type="password"
          formControlName="password"
          autocomplete="new-password"
          [class.is-invalid]="showErrors('password')"
          placeholder="Minimo 8 caracteres"
        />
        @if (showErrors('password')) {
          <div class="form-error">
            @if (hasError('password', 'required')) {
              <span>La contraseña es obligatoria.</span>
            }
            @if (hasError('password', 'minlength')) {
              <span>Debe tener al menos 8 caracteres.</span>
            }
            @if (hasError('password', 'maxlength')) {
              <span>No puede superar los 100 caracteres.</span>
            }
          </div>
        }

        <div class="name-row">
          <div class="field">
            <label class="form-label" for="firstName">Nombre</label>
            <input
              id="firstName"
              class="form-input"
              type="text"
              formControlName="firstName"
              autocomplete="given-name"
              [class.is-invalid]="showErrors('firstName')"
              placeholder="Nombre"
            />
            @if (showErrors('firstName')) {
              <div class="form-error">
                @if (hasError('firstName', 'required')) {
                  <span>El nombre es obligatorio.</span>
                }
                @if (hasError('firstName', 'maxlength')) {
                  <span>Maximo 20 caracteres.</span>
                }
                @if (hasError('firstName', 'pattern')) {
                  <span>Solo se permiten letras.</span>
                }
              </div>
            }
          </div>
          <div class="field">
            <label class="form-label" for="lastName">Apellido</label>
            <input
              id="lastName"
              class="form-input"
              type="text"
              formControlName="lastName"
              autocomplete="family-name"
              [class.is-invalid]="showErrors('lastName')"
              placeholder="Apellido"
            />
            @if (showErrors('lastName')) {
              <div class="form-error">
                @if (hasError('lastName', 'required')) {
                  <span>El apellido es obligatorio.</span>
                }
                @if (hasError('lastName', 'maxlength')) {
                  <span>Maximo 20 caracteres.</span>
                }
                @if (hasError('lastName', 'pattern')) {
                  <span>Solo se permiten letras.</span>
                }
              </div>
            }
          </div>
        </div>

        <div class="meta-row">
          <div class="field">
            <label class="form-label" for="dni">DNI</label>
            <input
              id="dni"
              class="form-input"
              type="text"
              formControlName="dni"
              inputmode="numeric"
              autocomplete="off"
              [class.is-invalid]="showErrors('dni')"
              placeholder="Sin puntos"
            />
            @if (showErrors('dni')) {
              <div class="form-error">
                @if (hasError('dni', 'required')) {
                  <span>El DNI es obligatorio.</span>
                }
                @if (hasError('dni', 'pattern')) {
                  <span>Debe tener exactamente 8 numeros.</span>
                }
              </div>
            }
          </div>
          <div class="field">
            <label class="form-label" for="phone">Telefono</label>
            <input
              id="phone"
              class="form-input"
              type="tel"
              formControlName="phone"
              autocomplete="tel"
              [class.is-invalid]="showErrors('phone')"
              placeholder="+54 9 11 1234-5678"
            />
            @if (showErrors('phone')) {
              <div class="form-error">
                @if (hasError('phone', 'required')) {
                  <span>El telefono es obligatorio.</span>
                }
                @if (hasError('phone', 'pattern')) {
                  <span>Entre 7 y 20 digitos, solo numeros.</span>
                }
              </div>
            }
          </div>
        </div>

        <button class="action-button" type="submit" [disabled]="fg.invalid">Crear cuenta</button>
      </form>
    </div>
  </div>
</section>

